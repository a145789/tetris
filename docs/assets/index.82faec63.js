import{d as e,r as t,o as n,u as o,c as r,a as s,F as a,b as c,w as l,e as u,f as i,g as h,h as f,i as g}from"./vendor.a18dfd70.js";var p={mounted(e,{value:{keyDown:t,keyUp:n,params:o},modifiers:r}){const s=d(t,n,o,r);Object.keys(s).forEach((t=>{e[t]=s[t]})),e.addEventListener("touchstart",e.touchstartFn,!1),e.addEventListener("touchmove",e.touchmoveFn,!1),e.addEventListener("touchend",e.touchendFn,!1),e.addEventListener("touchcancel",e.touchcancelFn,!1)},beforeUnmount(e){e.removeEventListener("touchstart",e.touchstartFn),e.removeEventListener("touchmove",e.touchmoveFn),e.removeEventListener("touchend",e.touchendFn),e.removeEventListener("touchcancel",e.touchcancelFn),e.touchstartFn=e.touchmoveFn=e.touchendFn=e.touchcancelFn=null}};const d=(e,t,n,o)=>{let r=null,s={x1:null,y1:null,x2:null,y2:null};return{touchstartFn:function(t){o.stopPropagation&&t.stopPropagation(),o.preventDefault&&t.preventDefault(),function(t){if(t.touches){var o=t.touches[0];s.x1=o.pageX,s.y1=o.pageY,s.x2&&Math.abx(s.x1-s.x2)>30||s.y2&&Math.abx(s.y1-s.y2)>30||(r=setTimeout((function(){e(n)}),0))}}(t)},touchmoveFn:function(e){!function(e){if(e.touches){var t=e.touches[0];s.x2=t.pageX,s.y2=t.pageY}}(e)},touchendFn:function(e){e.changedTouches&&(s.x2&&Math.abx(s.x1-s.x2)>30||s.y2&&Math.abx(s.y1-s.y2)>30||(r=setTimeout((function(){t(n)}),0)),s.x1=s.y1=s.x2=s.y2=null)},touchcancelFn:function(e){clearTimeout(r)}}};const v=document.body.clientWidth<410,m=(v?500:700)/20,w=(v?300:400)/20,y=m-1;var b,k,A,x,D,F;function L(){const e=[{name:"space",bg:"bg-f1707d",shape:[[m-1,1],[m-1,2],[m-2,1],[m-2,2]]},{name:"left-l",bg:"bg-f15536",shape:[[m-1,1],[m-2,1],[m-2,2],[m-2,3],[m-2,4]]},{name:"right-l",bg:"bg-ddff95",shape:[[m-1,4],[m-2,1],[m-2,2],[m-2,3],[m-2,4]]},{name:"tanke",bg:"bg-f1b8f1",shape:[[m-1,2],[m-2,1],[m-2,2],[m-2,3]]},{name:"left-z",bg:"bg-b8f1ed",shape:[[m-1,1],[m-1,2],[m-2,2],[m-2,3]]},{name:"right-z",bg:"bg-f3d751",shape:[[m-1,2],[m-1,3],[m-2,1],[m-2,2]]},{name:"line",bg:"bg-ac5e74",shape:[[m-1,1],[m-1,2],[m-1,3],[m-1,4]]}];return e[Math.floor(Math.random()*e.length)]}(k=b||(b={})).ArrowUp="ArrowUp",k.ArrowLeft="ArrowLeft",k.ArrowDown="ArrowDown",k.ArrowRight="ArrowRight",(x=A||(A={}))[x.Y=0]="Y",x[x.X=1]="X",(F=D||(D={}))[F.add=0]="add",F[F.cut=1]="cut",F[F.other=2]="other";const E=e({name:"HelloWorld",directives:{tap:p},setup:()=>{const e=t(Array.from({length:m}).fill(0).map((()=>Array.from({length:w}).map((()=>({bg:""})))))),o=[];for(let t=0;t<e.length;t++)o[y-t]=e[t];let r,{shape:s,bg:a,name:c}=L();function l(t,n,o,r){const a=JSON.parse(JSON.stringify(s));if(2!==t){for(let e=0,o=s.length;e<o;e++)1===t?a[e][n]--:a[e][n]++;if(a.some((e=>o(e[n])))||((t,n,o)=>{const r=[0,1].find((e=>e!==n));return t.reduce(((e,t)=>{const s=e.findIndex((e=>e[r]===t[r]));return-1!==s?o(e[s][n],t[n])&&e.splice(s,1,t):e.push(t),e}),[]).some((([t,n])=>""!==e[t][n].bg))})(a,n,r))return!0}else{const[t,n]=s[Math.ceil(a.length/2)];for(let e=0,o=s.length;e<o;e++){const[o,r]=s[e];o>=t&&(a[e][1]=n-(o-t)),o<=t&&(a[e][1]=n+t-o),r>=n&&(a[e][0]=t+r-n),r<=n&&(a[e][0]=t-(n-r))}if(a.some((([e,t])=>e<0||e===m||t<0||t===w))||a.reduce(((e,t)=>(s.some((([e,n])=>e===t[0]&&n===t[1]))||e.push(t),e)),[]).some((([t,n])=>""!==e[t][n].bg)))return!1}return u(a),!1}const u=(t=s)=>{for(const[n,o]of s)e[n][o].bg="";for(const[n,o]of t)e[n][o].bg=a;s=t},i=()=>{if(l(1,0,(e=>e<0),((e,t)=>e>t))){for(let t=0;t<e.length;t++){if(e[t].every((e=>""!==e.bg))){for(let n=t;n<e.length;n++){const t=e[n+1];e[n].forEach(((o,r)=>{o.bg=n+1!==e.length?t[r].bg:""}))}t--}}({shape:s,bg:a,name:c}=L())}},h=({key:e})=>{if(e in b)switch(clearInterval(r),e){case b.ArrowUp:if("space"===c)return;l(2);break;case b.ArrowLeft:l(1,1,(e=>e<0),((e,t)=>e>t));break;case b.ArrowDown:i();break;case b.ArrowRight:l(0,1,(e=>e===w),((e,t)=>e<t))}},f=({key:e})=>{if(e in b){switch(e){case b.ArrowUp:case b.ArrowLeft:case b.ArrowDown:case b.ArrowRight:}r=setInterval(i,300)}};return n((()=>{window.addEventListener("keydown",h),window.addEventListener("keyup",f),u(),r=setInterval(i,300)})),{spaceListComp:o,SIZE:20,BOX_HIGHT:m,BOX_WIDTH:w,keyDown:h,keyUp:f,Arrow:b,svg_up:"./assets/up.f113fb7f.svg",svg_down:"./assets/down.6935b032.svg",svg_right:"./assets/right.89a169d2.svg",svg_left:"./assets/left.1fa58ebe.svg",isPhone:v}}}),U=()=>{o((e=>({"6ce72380":e.BOX_HIGHT*e.SIZE+"px","4117f9f4":e.BOX_WIDTH*e.SIZE+"px",75245710:e.SIZE+"px"})))},I=E.setup;E.setup=I?(e,t)=>(U(),I(e,t)):U;const _={class:"box"},H={class:"line"},T={key:0,class:"arrow"},X={class:"top"},M={class:"left"},O={class:"down"},S={class:"right"};E.render=function(e,t,n,o,f,g){const p=i("tap");return h(),r(a,null,[s("div",_,[(h(!0),r(a,null,c(e.spaceListComp,(e=>(h(),r("div",H,[(h(!0),r(a,null,c(e,(e=>(h(),r("div",{class:`bg ${e.bg}`},null,2)))),256))])))),256))]),e.isPhone?(h(),r("div",T,[s("div",null,[l(s("div",X,[s("img",{src:e.svg_up},null,8,["src"])],512),[[p,{keyDown:e.keyDown,keyUp:e.keyUp,params:{key:e.Arrow.ArrowUp}}]])]),s("div",null,[l(s("div",M,[s("img",{src:e.svg_left},null,8,["src"])],512),[[p,{keyDown:e.keyDown,keyUp:e.keyUp,params:{key:e.Arrow.ArrowLeft}}]]),l(s("div",O,[s("img",{src:e.svg_down},null,8,["src"])],512),[[p,{keyDown:e.keyDown,keyUp:e.keyUp,params:{key:e.Arrow.ArrowDown}}]]),l(s("div",S,[s("img",{src:e.svg_right},null,8,["src"])],512),[[p,{keyDown:e.keyDown,keyUp:e.keyUp,params:{key:e.Arrow.ArrowRight}}]])])])):u("",!0)],64)};var W=e({name:"App",components:{HelloWorld:E}});W.render=function(e,t,n,o,s,a){const c=f("HelloWorld");return h(),r(c)},g(W).mount("#app");
